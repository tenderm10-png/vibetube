@echo off
chcp 65001 >nul
title SileTube - –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
color 0A

echo.
echo ========================================
echo    üé• SileTube - –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
echo ========================================
echo.

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js
where node >nul 2>nul
if %ERRORLEVEL% NEQ 0 (
    echo [‚ùå –û–®–ò–ë–ö–ê] Node.js –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo.
    echo –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js —Å https://nodejs.org/
    echo –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è Node.js 18 –∏–ª–∏ –≤—ã—à–µ
    echo.
    pause
    exit /b 1
)

echo [‚úì] Node.js –Ω–∞–π–¥–µ–Ω
for /f "tokens=*" %%i in ('node --version') do set NODE_VERSION=%%i
echo     –í–µ—Ä—Å–∏—è: %NODE_VERSION%
echo.

REM –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /d "%~dp0"
if not exist "VibeTube" (
    echo [‚ùå –û–®–ò–ë–ö–ê] –ü–∞–ø–∫–∞ VibeTube –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!
    echo –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
    pause
    exit /b 1
)

cd VibeTube
echo [‚úì] –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
echo.

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
if not exist "node_modules" (
    echo [*] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
    echo [*] –ù–∞—á–∏–Ω–∞—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
    echo     –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
    echo.
    call npm install
    if %ERRORLEVEL% NEQ 0 (
        echo.
        echo [‚ùå –û–®–ò–ë–ö–ê] –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        echo –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        pause
        exit /b 1
    )
    echo.
    echo [‚úì] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
    echo.
) else (
    echo [‚úì] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
    echo.
)

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ package.json
if not exist "package.json" (
    echo [‚ùå –û–®–ò–ë–ö–ê] –§–∞–π–ª package.json –Ω–µ –Ω–∞–π–¥–µ–Ω!
    pause
    exit /b 1
)

REM –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
echo ========================================
echo    üöÄ –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞...
echo ========================================
echo.
echo –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
echo     http://localhost:5173
echo.
echo –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
echo.
echo ========================================
echo.

call npm run dev

REM –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
echo.
echo –°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
pause

